{"ast":null,"code":"/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015, 2016 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as Crypto from \"crypto\";\nimport JSONParser from 'json-stream';\nimport Through2 from 'through2';\nimport { isFunction } from \"./internal/helper.mjs\";\nimport * as xmlParsers from \"./xml-parsers.mjs\";\n\n// getConcater returns a stream that concatenates the input and emits\n// the concatenated output when 'end' has reached. If an optional\n// parser function is passed upon reaching the 'end' of the stream,\n// `parser(concatenated_data)` will be emitted.\nexport function getConcater(parser, emitError) {\n  var objectMode = false;\n  var bufs = [];\n  if (parser && !isFunction(parser)) {\n    throw new TypeError('parser should be of type \"function\"');\n  }\n  if (parser) {\n    objectMode = true;\n  }\n  return Through2({\n    objectMode\n  }, function (chunk, enc, cb) {\n    bufs.push(chunk);\n    cb();\n  }, function (cb) {\n    if (emitError) {\n      cb(parser(Buffer.concat(bufs).toString()));\n      // cb(e) would mean we have to emit 'end' by explicitly calling this.push(null)\n      this.push(null);\n      return;\n    }\n    if (bufs.length) {\n      if (parser) {\n        this.push(parser(Buffer.concat(bufs).toString()));\n      } else {\n        this.push(Buffer.concat(bufs));\n      }\n    }\n    cb();\n  });\n}\n\n// A through stream that calculates md5sum and sha256sum\nexport function getHashSummer(enableSHA256) {\n  var md5 = Crypto.createHash('md5');\n  var sha256 = Crypto.createHash('sha256');\n  return Through2.obj(function (chunk, enc, cb) {\n    if (enableSHA256) {\n      sha256.update(chunk);\n    } else {\n      md5.update(chunk);\n    }\n    cb();\n  }, function (cb) {\n    var md5sum = '';\n    var sha256sum = '';\n    if (enableSHA256) {\n      sha256sum = sha256.digest('hex');\n    } else {\n      md5sum = md5.digest('base64');\n    }\n    var hashData = {\n      md5sum,\n      sha256sum\n    };\n    this.push(hashData);\n    this.push(null);\n    cb();\n  });\n}\n\n// Following functions return a stream object that parses XML\n// and emits suitable Javascript objects.\n\n// Parses CopyObject response.\nexport function getCopyObjectTransformer() {\n  return getConcater(xmlParsers.parseCopyObject);\n}\n\n// Parses listMultipartUploads response.\nexport function getListMultipartTransformer() {\n  return getConcater(xmlParsers.parseListMultipart);\n}\n\n// Parses listObjects response.\nexport function getListObjectsTransformer() {\n  return getConcater(xmlParsers.parseListObjects);\n}\n\n// Parses listObjects response.\nexport function getListObjectsV2Transformer() {\n  return getConcater(xmlParsers.parseListObjectsV2);\n}\n\n// Parses listObjects with metadata response.\nexport function getListObjectsV2WithMetadataTransformer() {\n  return getConcater(xmlParsers.parseListObjectsV2WithMetadata);\n}\n\n// Parses completeMultipartUpload response.\nexport function getCompleteMultipartTransformer() {\n  return getConcater(xmlParsers.parseCompleteMultipart);\n}\n\n// Parses GET/SET BucketNotification response\nexport function getBucketNotificationTransformer() {\n  return getConcater(xmlParsers.parseBucketNotification);\n}\n\n// Parses a notification.\nexport function getNotificationTransformer() {\n  // This will parse and return each object.\n  return new JSONParser();\n}\nexport function bucketVersioningTransformer() {\n  return getConcater(xmlParsers.parseBucketVersioningConfig);\n}\nexport function getTagsTransformer() {\n  return getConcater(xmlParsers.parseTagging);\n}\nexport function lifecycleTransformer() {\n  return getConcater(xmlParsers.parseLifecycleConfig);\n}\nexport function objectLockTransformer() {\n  return getConcater(xmlParsers.parseObjectLockConfig);\n}\nexport function objectRetentionTransformer() {\n  return getConcater(xmlParsers.parseObjectRetentionConfig);\n}\nexport function bucketEncryptionTransformer() {\n  return getConcater(xmlParsers.parseBucketEncryptionConfig);\n}\nexport function objectLegalHoldTransformer() {\n  return getConcater(xmlParsers.parseObjectLegalHoldConfig);\n}\nexport function uploadPartTransformer() {\n  return getConcater(xmlParsers.uploadPartParser);\n}\nexport function selectObjectContentTransformer() {\n  return getConcater();\n}\nexport function removeObjectsTransformer() {\n  return getConcater(xmlParsers.removeObjectsParser);\n}","map":{"version":3,"names":["Crypto","JSONParser","Through2","isFunction","xmlParsers","getConcater","parser","emitError","objectMode","bufs","TypeError","chunk","enc","cb","push","Buffer","concat","toString","length","getHashSummer","enableSHA256","md5","createHash","sha256","obj","update","md5sum","sha256sum","digest","hashData","getCopyObjectTransformer","parseCopyObject","getListMultipartTransformer","parseListMultipart","getListObjectsTransformer","parseListObjects","getListObjectsV2Transformer","parseListObjectsV2","getListObjectsV2WithMetadataTransformer","parseListObjectsV2WithMetadata","getCompleteMultipartTransformer","parseCompleteMultipart","getBucketNotificationTransformer","parseBucketNotification","getNotificationTransformer","bucketVersioningTransformer","parseBucketVersioningConfig","getTagsTransformer","parseTagging","lifecycleTransformer","parseLifecycleConfig","objectLockTransformer","parseObjectLockConfig","objectRetentionTransformer","parseObjectRetentionConfig","bucketEncryptionTransformer","parseBucketEncryptionConfig","objectLegalHoldTransformer","parseObjectLegalHoldConfig","uploadPartTransformer","uploadPartParser","selectObjectContentTransformer","removeObjectsTransformer","removeObjectsParser"],"sources":["/Users/admin/Documents/analytical_engineering/Docker_Analytics_Sandbox/src/react-app/node_modules/minio/dist/esm/transformers.js"],"sourcesContent":["/*\n * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015, 2016 MinIO, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as Crypto from 'node:crypto'\n\nimport JSONParser from 'json-stream'\nimport Through2 from 'through2'\n\nimport { isFunction } from './internal/helper.ts'\nimport * as xmlParsers from './xml-parsers.js'\n\n// getConcater returns a stream that concatenates the input and emits\n// the concatenated output when 'end' has reached. If an optional\n// parser function is passed upon reaching the 'end' of the stream,\n// `parser(concatenated_data)` will be emitted.\nexport function getConcater(parser, emitError) {\n  var objectMode = false\n  var bufs = []\n\n  if (parser && !isFunction(parser)) {\n    throw new TypeError('parser should be of type \"function\"')\n  }\n\n  if (parser) {\n    objectMode = true\n  }\n\n  return Through2(\n    { objectMode },\n    function (chunk, enc, cb) {\n      bufs.push(chunk)\n      cb()\n    },\n    function (cb) {\n      if (emitError) {\n        cb(parser(Buffer.concat(bufs).toString()))\n        // cb(e) would mean we have to emit 'end' by explicitly calling this.push(null)\n        this.push(null)\n        return\n      }\n      if (bufs.length) {\n        if (parser) {\n          this.push(parser(Buffer.concat(bufs).toString()))\n        } else {\n          this.push(Buffer.concat(bufs))\n        }\n      }\n      cb()\n    },\n  )\n}\n\n// A through stream that calculates md5sum and sha256sum\nexport function getHashSummer(enableSHA256) {\n  var md5 = Crypto.createHash('md5')\n  var sha256 = Crypto.createHash('sha256')\n\n  return Through2.obj(\n    function (chunk, enc, cb) {\n      if (enableSHA256) {\n        sha256.update(chunk)\n      } else {\n        md5.update(chunk)\n      }\n      cb()\n    },\n    function (cb) {\n      var md5sum = ''\n      var sha256sum = ''\n      if (enableSHA256) {\n        sha256sum = sha256.digest('hex')\n      } else {\n        md5sum = md5.digest('base64')\n      }\n      var hashData = { md5sum, sha256sum }\n      this.push(hashData)\n      this.push(null)\n      cb()\n    },\n  )\n}\n\n// Following functions return a stream object that parses XML\n// and emits suitable Javascript objects.\n\n// Parses CopyObject response.\nexport function getCopyObjectTransformer() {\n  return getConcater(xmlParsers.parseCopyObject)\n}\n\n// Parses listMultipartUploads response.\nexport function getListMultipartTransformer() {\n  return getConcater(xmlParsers.parseListMultipart)\n}\n\n// Parses listObjects response.\nexport function getListObjectsTransformer() {\n  return getConcater(xmlParsers.parseListObjects)\n}\n\n// Parses listObjects response.\nexport function getListObjectsV2Transformer() {\n  return getConcater(xmlParsers.parseListObjectsV2)\n}\n\n// Parses listObjects with metadata response.\nexport function getListObjectsV2WithMetadataTransformer() {\n  return getConcater(xmlParsers.parseListObjectsV2WithMetadata)\n}\n\n// Parses completeMultipartUpload response.\nexport function getCompleteMultipartTransformer() {\n  return getConcater(xmlParsers.parseCompleteMultipart)\n}\n\n// Parses GET/SET BucketNotification response\nexport function getBucketNotificationTransformer() {\n  return getConcater(xmlParsers.parseBucketNotification)\n}\n\n// Parses a notification.\nexport function getNotificationTransformer() {\n  // This will parse and return each object.\n  return new JSONParser()\n}\n\nexport function bucketVersioningTransformer() {\n  return getConcater(xmlParsers.parseBucketVersioningConfig)\n}\n\nexport function getTagsTransformer() {\n  return getConcater(xmlParsers.parseTagging)\n}\n\nexport function lifecycleTransformer() {\n  return getConcater(xmlParsers.parseLifecycleConfig)\n}\n\nexport function objectLockTransformer() {\n  return getConcater(xmlParsers.parseObjectLockConfig)\n}\n\nexport function objectRetentionTransformer() {\n  return getConcater(xmlParsers.parseObjectRetentionConfig)\n}\nexport function bucketEncryptionTransformer() {\n  return getConcater(xmlParsers.parseBucketEncryptionConfig)\n}\n\nexport function objectLegalHoldTransformer() {\n  return getConcater(xmlParsers.parseObjectLegalHoldConfig)\n}\n\nexport function uploadPartTransformer() {\n  return getConcater(xmlParsers.uploadPartParser)\n}\nexport function selectObjectContentTransformer() {\n  return getConcater()\n}\n\nexport function removeObjectsTransformer() {\n  return getConcater(xmlParsers.removeObjectsParser)\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}